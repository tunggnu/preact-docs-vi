{"meta":{"title":"Option Hooks","description":"Preact has several option hooks that allow you to attach callbacks to various stages of the diffing process.","toc":[{"text":"Option Hooks","id":"option-hooks","level":1},{"text":"Versioning and Support","id":"versioning-and-support","level":2},{"text":"Setting Option Hooks","id":"setting-option-hooks","level":2},{"text":"Available Option Hooks","id":"available-option-hooks","level":2},{"text":"`options.vnode`","id":"optionsvnode","level":4},{"text":"`options.unmount`","id":"optionsunmount","level":4},{"text":"`options.diffed`","id":"optionsdiffed","level":4},{"text":"`options.event`","id":"optionsevent","level":4},{"text":"`options.requestAnimationFrame`","id":"optionsrequestanimationframe","level":4},{"text":"`options.debounceRendering`","id":"optionsdebouncerendering","level":4},{"text":"`options.useDebugValue`","id":"optionsusedebugvalue","level":4}]},"html":"<h1>Option Hooks</h1><p>Callbacks for plugins that can change Preact&#39;s rendering.</p>\n<p>Preact supports a number of different callbacks that can be used to observe or change each stage of the rendering process, commonly referred to as &quot;Option Hooks&quot; (not to be confused with <a href=\"/guide/v10/hooks\">hooks</a>). These are frequently used to extend the feature-set of Preact itself, or to create specialized testing tools. All of our addons like <code>preact/hooks</code>, <code>preact/compat</code> and our devtools extension are based on these callbacks.</p>\n<p>This API is primarily intended for tooling or library authors who wish to extend Preact.</p>\n<hr>\n<toc></toc><hr>\n\n\t\t\t\t<h2 id=\"versioning-and-support\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#versioning-and-support\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: Versioning and Support (#versioning-and-support)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>Versioning and Support</span>\n\t\t\t\t</h2><p>Option Hooks are shipped in Preact, and as such are semantically versioned. However, they do not have the same deprecation policy, which means major versions can change the API without an extended announcement period leading up to release. This is also true for the structure of internal APIs exposed through Options Hooks, like <code>VNode</code> objects.</p>\n\n\t\t\t\t<h2 id=\"setting-option-hooks\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#setting-option-hooks\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: Setting Option Hooks (#setting-option-hooks)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>Setting Option Hooks</span>\n\t\t\t\t</h2><p>You can set Options Hooks in Preact by modifying the exported <code>options</code> object.</p>\n<p>When defining a hook, always make sure to call a previously defined hook of that name if there was one. Without this, the callchain will be broken and code that depends on the previously-installed hook will break, resulting in addons like <code>preact/hooks</code> or DevTools ceasing to work. Make sure to pass the same arguments to the original hook, too - unless you have a specific reason to change them.</p>\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> options <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'preact'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Store previous hook</span>\n<span class=\"token keyword\">const</span> oldHook <span class=\"token operator\">=</span> options<span class=\"token punctuation\">.</span>vnode<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Set our own options hook</span>\noptions<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">vnode</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">vnode</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hey I'm a vnode\"</span><span class=\"token punctuation\">,</span> vnode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Call previously defined hook if there was any</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>oldHook<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">oldHook</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<p>None of the currently available hooks excluding <code>options.event</code> have return values, so handling return values from the original hook is not necessary.</p>\n\n\t\t\t\t<h2 id=\"available-option-hooks\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#available-option-hooks\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: Available Option Hooks (#available-option-hooks)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>Available Option Hooks</span>\n\t\t\t\t</h2>\n\t\t\t\t<h4 id=\"optionsvnode\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsvnode\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.vnode` (#optionsvnode)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.vnode`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(vnode: VNode) =&gt; void</code></p>\n<p>The most common Options Hook, <code>vnode</code> is invoked whenever a VNode object is created. VNodes are Preact&#39;s representation of Virtual DOM elements, commonly thought of as &quot;JSX Elements&quot;.</p>\n\n\t\t\t\t<h4 id=\"optionsunmount\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsunmount\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.unmount` (#optionsunmount)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.unmount`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(vnode: VNode) =&gt; void</code></p>\n<p>Invoked immediately before a vnode is unmounted, when its DOM representation is still attached.</p>\n\n\t\t\t\t<h4 id=\"optionsdiffed\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsdiffed\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.diffed` (#optionsdiffed)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.diffed`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(vnode: VNode) =&gt; void</code></p>\n<p>Invoked immediately after a vnode is rendered, once its DOM representation is constructed or transformed into the correct state.</p>\n\n\t\t\t\t<h4 id=\"optionsevent\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsevent\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.event` (#optionsevent)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.event`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(event: Event) =&gt; any</code></p>\n<p>Invoked just before a DOM event is handled by its associated Virtual DOM listener. When <code>options.event</code> is set, the event which is event listener argument is replaced return value of <code>options.event</code>.</p>\n\n\t\t\t\t<h4 id=\"optionsrequestanimationframe\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsrequestanimationframe\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.requestAnimationFrame` (#optionsrequestanimationframe)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.requestAnimationFrame`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(callback: () =&gt; void) =&gt; void</code></p>\n<p>Controls the scheduling of effects and effect-based based functionality in <code>preact/hooks</code>.</p>\n\n\t\t\t\t<h4 id=\"optionsdebouncerendering\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsdebouncerendering\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.debounceRendering` (#optionsdebouncerendering)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.debounceRendering`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(callback: () =&gt; void) =&gt; void</code></p>\n<p>A timing &quot;deferral&quot; function that is used to batch processing of updates in the global component rendering queue.</p>\n<p>By default, Preact uses a zero duration <code>setTimeout</code>.</p>\n\n\t\t\t\t<h4 id=\"optionsusedebugvalue\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#optionsusedebugvalue\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: `options.useDebugValue` (#optionsusedebugvalue)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>`options.useDebugValue`</span>\n\t\t\t\t</h4><p><strong>Signature:</strong> <code>(value: string | number) =&gt; void</code></p>\n<p>Called when the <code>useDebugValue</code> hook in <code>preact/hooks</code> is called.</p>\n"}