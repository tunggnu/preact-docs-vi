{"meta":{"title":"Keys (KhÃ³a)","prev":"/tutorial/07-side-effects","next":"/tutorial/09-error-handling","solvable":true,"tutorial":{"setup":"useRealm(function (realm) {\n  // the app element\n  var out = realm.globalThis.document.body.firstElementChild;\n  var options = require('preact').options;\n\n  var oldRender = options.__r;\n  var timer;\n  options.__r = function(vnode) {\n    timer = setTimeout(check, 10);\n    if (oldRender) oldRender(vnode);\n  };\n\n  function check() {\n    timer = null;\n    var c = out.firstElementChild.children;\n    if (\n      c.length === 2 &&\n      /learn preact/i.test(c[0].textContent) &&\n      /make an awesome app/i.test(c[1].textContent)\n    ) {\n      solutionCtx.setSolved(true);\n    }\n  }\n\n  return () => {\n    options.__r = oldRender;\n  };\n});","initial":"import { render } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\n\nconst wait = ms => new Promise(r => setTimeout(r, ms))\n\nconst getTodos = async () => {\n  await wait(500);\n  return [\n    { id: 1, text: 'learn Preact', done: false },\n    { id: 2, text: 'make an awesome app', done: false },\n  ]\n}\n\nfunction TodoList() {\n  const [todos, setTodos] = useState([])\n\n  return (\n    <ul>\n    </ul>\n  )\n}\n\nrender(<TodoList />, document.getElementById(\"app\"));","final":"import { render } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\n\nconst wait = ms => new Promise(r => setTimeout(r, ms))\n\nconst getTodos = async () => {\n  await wait(500);\n  return [\n    { id: 1, text: 'learn Preact', done: false },\n    { id: 2, text: 'make an awesome app', done: false },\n  ]\n}\n\nfunction TodoList() {\n  const [todos, setTodos] = useState([])\n\n  useEffect(() => {\n    getTodos().then(todos => {\n      setTodos(todos)\n    })\n  }, [])\n\n  return (\n    <ul>\n      {todos.map(todo => (\n        <li key={todo.id}>\n          {todo.text}\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nrender(<TodoList />, document.getElementById(\"app\"));"}},"html":"<h1>Keys (KhÃ³a)</h1><p>á» chÆ°Æ¡ng Ä‘áº§u tiÃªn, chÃºng ta Ä‘Ã£ tháº¥y cÃ¡ch Preact sá»­ dá»¥ng Virtual DOM Ä‘á»ƒ tÃ­nh toÃ¡n nhá»¯ng gÃ¬ Ä‘Ã£ thay Ä‘á»•i giá»¯a hai cÃ¢y Ä‘Æ°á»£c mÃ´ táº£ bá»Ÿi JSX cá»§a chÃºng ta, sau Ä‘Ã³ Ã¡p dá»¥ng cÃ¡c thay Ä‘á»•i Ä‘Ã³ lÃªn HTML DOM Ä‘á»ƒ cáº­p nháº­t trang. Äiá»u nÃ y hoáº¡t Ä‘á»™ng tá»‘t trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, nhÆ°ng Ä‘Ã´i khi yÃªu cáº§u Preact pháº£i &quot;Ä‘oÃ¡n&quot; hÃ¬nh dáº¡ng cá»§a cÃ¢y Ä‘Ã£ thay Ä‘á»•i nhÆ° tháº¿ nÃ o giá»¯a hai láº§n render.</p>\n<p>TÃ¬nh huá»‘ng phá»• biáº¿n nháº¥t mÃ  dá»± Ä‘oÃ¡n cá»§a Preact cÃ³ thá»ƒ khÃ¡c vá»›i Ã½ Ä‘á»‹nh cá»§a chÃºng ta lÃ  khi so sÃ¡nh cÃ¡c danh sÃ¡ch. HÃ£y xem xÃ©t má»™t component danh sÃ¡ch viá»‡c cáº§n lÃ m Ä‘Æ¡n giáº£n:</p>\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">TodoList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'wake up'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'make bed'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">wakeUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTodos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'make bed'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>wakeUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<p>Láº§n Ä‘áº§u tiÃªn component nÃ y Ä‘Æ°á»£c render, hai pháº§n tá»­ <code>&lt;li&gt;</code> sáº½ Ä‘Æ°á»£c váº½ ra. Sau khi nháº¥n nÃºt <strong>&quot;TÃ´i Ä‘Ã£ thá»©c dáº­y!&quot;</strong>, máº£ng state <code>todos</code> cá»§a chÃºng ta Ä‘Æ°á»£c cáº­p nháº­t chá»‰ cÃ²n má»¥c thá»© hai, <code>&quot;make bed&quot;</code>.</p>\n<p>ÄÃ¢y lÃ  nhá»¯ng gÃ¬ Preact &quot;tháº¥y&quot; á»Ÿ láº§n render Ä‘áº§u tiÃªn vÃ  láº§n render thá»© hai:</p>\n<table><thead><tr>\n  <th>Láº§n render Ä‘áº§u tiÃªn</th>\n  <th>Láº§n render thá»© hai</th>\n</tr></thead><tbody><tr><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">wake up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td></tr></tbody></table>\n\n<p>Báº¡n cÃ³ nháº­n ra váº¥n Ä‘á» khÃ´ng? Máº·c dÃ¹ vá»›i chÃºng ta thÃ¬ rÃµ rÃ ng pháº§n tá»­ danh sÃ¡ch Ä‘áº§u tiÃªn (&quot;wake up&quot;) Ä‘Ã£ bá»‹ xÃ³a, nhÆ°ng Preact khÃ´ng biáº¿t Ä‘iá»u Ä‘Ã³. Táº¥t cáº£ nhá»¯ng gÃ¬ Preact tháº¥y lÃ  trÆ°á»›c Ä‘Ã³ cÃ³ hai má»¥c, bÃ¢y giá» chá»‰ cÃ²n má»™t. Khi Ã¡p dá»¥ng cáº­p nháº­t nÃ y, thá»±c táº¿ nÃ³ sáº½ xÃ³a má»¥c thá»© hai (<code>&lt;li&gt;make bed&lt;/li&gt;</code>), sau Ä‘Ã³ cáº­p nháº­t vÄƒn báº£n cá»§a má»¥c Ä‘áº§u tiÃªn tá»« <code>wake up</code> thÃ nh <code>make bed</code>.</p>\n<p>Káº¿t quáº£ vá» máº·t ká»¹ thuáº­t lÃ  Ä‘Ãºng â€“ chá»‰ cÃ²n má»™t má»¥c vá»›i ná»™i dung &quot;make bed&quot; â€“ nhÆ°ng cÃ¡ch mÃ  chÃºng ta Ä‘áº¡t Ä‘Æ°á»£c káº¿t quáº£ Ä‘Ã³ lÃ  khÃ´ng tá»‘i Æ°u. HÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u cÃ³ 1000 má»¥c trong danh sÃ¡ch vÃ  chÃºng ta xÃ³a má»¥c Ä‘áº§u tiÃªn: thay vÃ¬ chá»‰ xÃ³a má»™t <code>&lt;li&gt;</code>, Preact sáº½ cáº­p nháº­t vÄƒn báº£n cá»§a 999 má»¥c cÃ²n láº¡i vÃ  xÃ³a má»¥c cuá»‘i cÃ¹ng.</p>\n\n\t\t\t\t<h2 id=\"__key__-cho-viá»‡c-render-danh-sÃ¡ch\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#__key__-cho-viá»‡c-render-danh-sÃ¡ch\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: __key__ cho viá»‡c render danh sÃ¡ch (#__key__-cho-viá»‡c-render-danh-sÃ¡ch)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>__key__ cho viá»‡c render danh sÃ¡ch</span>\n\t\t\t\t</h2><p>Trong cÃ¡c tÃ¬nh huá»‘ng nhÆ° vÃ­ dá»¥ trÃªn, cÃ¡c má»¥c Ä‘ang thay Ä‘á»•i <em>thá»© tá»±</em>. ChÃºng ta cáº§n má»™t cÃ¡ch Ä‘á»ƒ giÃºp Preact biáº¿t má»¥c nÃ o lÃ  má»¥c nÃ o, Ä‘á»ƒ nÃ³ cÃ³ thá»ƒ phÃ¡t hiá»‡n khi nÃ o má»—i má»¥c Ä‘Æ°á»£c thÃªm, xÃ³a hoáº·c thay tháº¿. Äá»ƒ lÃ m Ä‘iá»u nÃ y, chÃºng ta cÃ³ thá»ƒ thÃªm prop <code>key</code> cho má»—i má»¥c.</p>\n<p>Prop <code>key</code> lÃ  má»™t Ä‘á»‹nh danh cho má»™t pháº§n tá»­ nháº¥t Ä‘á»‹nh. Thay vÃ¬ so sÃ¡nh <em>thá»© tá»±</em> cÃ¡c pháº§n tá»­ giá»¯a hai cÃ¢y, cÃ¡c pháº§n tá»­ cÃ³ prop <code>key</code> sáº½ Ä‘Æ°á»£c so sÃ¡nh báº±ng cÃ¡ch tÃ¬m pháº§n tá»­ trÆ°á»›c Ä‘Ã³ cÃ³ cÃ¹ng giÃ¡ trá»‹ prop <code>key</code>. Má»™t <code>key</code> cÃ³ thá»ƒ lÃ  báº¥t ká»³ kiá»ƒu giÃ¡ trá»‹ nÃ o, miá»…n lÃ  nÃ³ &quot;á»•n Ä‘á»‹nh&quot; giá»¯a cÃ¡c láº§n render: cÃ¡c láº§n render láº·p láº¡i cá»§a cÃ¹ng má»™t má»¥c pháº£i cÃ³ giÃ¡ trá»‹ prop <code>key</code> giá»‘ng há»‡t nhau.</p>\n<p>HÃ£y thÃªm key vÃ o vÃ­ dá»¥ trÆ°á»›c. VÃ¬ danh sÃ¡ch viá»‡c cáº§n lÃ m cá»§a chÃºng ta lÃ  má»™t máº£ng cÃ¡c chuá»—i Ä‘Æ¡n giáº£n khÃ´ng thay Ä‘á»•i, chÃºng ta cÃ³ thá»ƒ dÃ¹ng chÃ­nh cÃ¡c chuá»—i Ä‘Ã³ lÃ m key:</p>\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">TodoList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'wake up'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'make bed'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">wakeUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTodos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'make bed'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token comment\">//  ^^^^^^^^^^ thÃªm prop key</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>wakeUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<p>Láº§n Ä‘áº§u tiÃªn chÃºng ta render phiÃªn báº£n má»›i cá»§a component <code>&lt;TodoList&gt;</code>, hai má»¥c <code>&lt;li&gt;</code> sáº½ Ä‘Æ°á»£c váº½ ra. Khi nháº¥n nÃºt &quot;TÃ´i Ä‘Ã£ thá»©c dáº­y!&quot;, máº£ng state <code>todos</code> cá»§a chÃºng ta Ä‘Æ°á»£c cáº­p nháº­t chá»‰ cÃ²n má»¥c thá»© hai, <code>&quot;make bed&quot;</code>.</p>\n<p>ÄÃ¢y lÃ  nhá»¯ng gÃ¬ Preact tháº¥y bÃ¢y giá» khi chÃºng ta Ä‘Ã£ thÃªm <code>key</code> cho cÃ¡c má»¥c danh sÃ¡ch:</p>\n<table><thead><tr>\n  <th>Láº§n render Ä‘áº§u tiÃªn</th>\n  <th>Láº§n render thá»© hai</th>\n</tr></thead><tbody><tr><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wake up<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">wake up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>make bed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>make bed<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td></tr></tbody></table>\n\n<p>Láº§n nÃ y, Preact cÃ³ thá»ƒ tháº¥y ráº±ng má»¥c Ä‘áº§u tiÃªn Ä‘Ã£ bá»‹ xÃ³a, vÃ¬ cÃ¢y thá»© hai khÃ´ng cÃ²n má»¥c nÃ o vá»›i <code>key=&quot;wake up&quot;</code>. NÃ³ sáº½ xÃ³a má»¥c Ä‘áº§u tiÃªn, vÃ  giá»¯ nguyÃªn má»¥c thá»© hai.</p>\n\n\t\t\t\t<h2 id=\"khi-__khÃ´ng-nÃªn__-dÃ¹ng-key\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#khi-__khÃ´ng-nÃªn__-dÃ¹ng-key\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: Khi __khÃ´ng nÃªn__ dÃ¹ng key (#khi-__khÃ´ng-nÃªn__-dÃ¹ng-key)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>Khi __khÃ´ng nÃªn__ dÃ¹ng key</span>\n\t\t\t\t</h2><p>Má»™t trong nhá»¯ng lá»—i phá»• biáº¿n nháº¥t mÃ  láº­p trÃ¬nh viÃªn gáº·p pháº£i vá»›i key lÃ  vÃ´ tÃ¬nh chá»n key <em>khÃ´ng á»•n Ä‘á»‹nh</em> giá»¯a cÃ¡c láº§n render. Trong vÃ­ dá»¥ cá»§a chÃºng ta, hÃ£y tÆ°á»Ÿng tÆ°á»£ng náº¿u chÃºng ta dÃ¹ng Ä‘á»‘i sá»‘ index tá»« <code>map()</code> lÃ m giÃ¡ trá»‹ <code>key</code> thay vÃ¬ chuá»—i <code>item</code>:</p>\n<p><code>items.map((item, index) =&gt; &lt;li key={index}&gt;{item}&lt;/li&gt;</code></p>\n<p>Äiá»u nÃ y sáº½ khiáº¿n Preact tháº¥y cÃ¡c cÃ¢y sau á»Ÿ láº§n render Ä‘áº§u tiÃªn vÃ  láº§n render thá»© hai:</p>\n<table><thead><tr>\n  <th>Láº§n render Ä‘áº§u tiÃªn</th>\n  <th>Láº§n render thá»© hai</th>\n</tr></thead><tbody><tr><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">wake up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td><td>\n\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">make bed</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TÃ´i Ä‘Ã£ thá»©c dáº­y!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</td></tr></tbody></table>\n\n<p>Váº¥n Ä‘á» lÃ  <code>index</code> thá»±c ra khÃ´ng xÃ¡c Ä‘á»‹nh má»™t <em><strong>giÃ¡ trá»‹</strong></em> trong danh sÃ¡ch cá»§a chÃºng ta, nÃ³ xÃ¡c Ä‘á»‹nh má»™t <em><strong>vá»‹ trÃ­</strong></em>. Render nhÆ° váº­y thá»±c ra <em>báº¯t buá»™c</em> Preact pháº£i khá»›p cÃ¡c má»¥c theo thá»© tá»±, giá»‘ng nhÆ° nÃ³ sáº½ lÃ m náº¿u khÃ´ng cÃ³ key nÃ o. Viá»‡c dÃ¹ng index lÃ m key tháº­m chÃ­ cÃ³ thá»ƒ gÃ¢y ra káº¿t quáº£ tá»‘n kÃ©m hoáº·c sai khi Ã¡p dá»¥ng cho cÃ¡c má»¥c danh sÃ¡ch cÃ³ kiá»ƒu khÃ¡c nhau, vÃ¬ key khÃ´ng thá»ƒ khá»›p cÃ¡c pháº§n tá»­ cÃ³ kiá»ƒu khÃ¡c nhau.</p>\n<blockquote>\n<p>ğŸš™ <strong>VÃ­ dá»¥ minh há»a!</strong> HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n gá»­i xe á»Ÿ bÃ£i Ä‘á»— xe cÃ³ nhÃ¢n viÃªn trÃ´ng xe.</p>\n<p>Khi báº¡n quay láº¡i láº¥y xe, báº¡n nÃ³i vá»›i nhÃ¢n viÃªn ráº±ng báº¡n lÃ¡i má»™t chiáº¿c SUV mÃ u xÃ¡m. Tháº­t khÃ´ng may, hÆ¡n má»™t ná»­a sá»‘ xe á»Ÿ bÃ£i lÃ  SUV mÃ u xÃ¡m, vÃ  báº¡n nháº­n nháº§m xe cá»§a ngÆ°á»i khÃ¡c. Chá»§ xe SUV mÃ u xÃ¡m tiáº¿p theo cÅ©ng nháº­n nháº§m xe, vÃ  cá»© tháº¿ tiáº¿p tá»¥c.</p>\n<p>Náº¿u thay vÃ o Ä‘Ã³ báº¡n nÃ³i vá»›i nhÃ¢n viÃªn ráº±ng báº¡n lÃ¡i chiáº¿c SUV mÃ u xÃ¡m vá»›i biá»ƒn sá»‘ &quot;PR3ACT&quot;, báº¡n cháº¯c cháº¯n sáº½ nháº­n láº¡i Ä‘Ãºng xe cá»§a mÃ¬nh.</p>\n</blockquote>\n\n\n<p>NguyÃªn táº¯c chung lÃ  khÃ´ng bao giá» dÃ¹ng index cá»§a máº£ng hoáº·c vÃ²ng láº·p lÃ m <code>key</code>. HÃ£y dÃ¹ng chÃ­nh giÃ¡ trá»‹ cá»§a má»¥c trong danh sÃ¡ch, hoáº·c táº¡o má»™t ID duy nháº¥t cho tá»«ng má»¥c vÃ  dÃ¹ng nÃ³:</p>\n\n\t\t\t\t<div class=\"highlight-container\">\n\t\t\t\t\t<pre class=\"highlight\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">'wake up'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">'make bed'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ToDos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<p>HÃ£y nhá»›: náº¿u báº¡n thá»±c sá»± khÃ´ng thá»ƒ tÃ¬m Ä‘Æ°á»£c má»™t key á»•n Ä‘á»‹nh, tá»‘t hÆ¡n lÃ  bá» qua prop <code>key</code> hoÃ n toÃ n thay vÃ¬ dÃ¹ng index lÃ m key.</p>\n\n\t\t\t\t<h2 id=\"thá»±c-hÃ nh\">\n\t\t\t\t\t<a class=\"fragment-link\" href=\"#thá»±c-hÃ nh\">\n\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" aria-label=\"Link to: Thá»±c hÃ nh! (#thá»±c-hÃ nh)\">\n\t\t\t\t\t\t\t<use href=\"/icons.svg#link\" ></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>Thá»±c hÃ nh!</span>\n\t\t\t\t</h2><p>á» bÃ i táº­p chÆ°Æ¡ng nÃ y, chÃºng ta sáº½ káº¿t há»£p nhá»¯ng gÃ¬ Ä‘Ã£ há»c vá» key vá»›i kiáº¿n thá»©c vá» tÃ¡c Ä‘á»™ng phá»¥ tá»« chÆ°Æ¡ng trÆ°á»›c.</p>\n<p>HÃ£y dÃ¹ng má»™t effect Ä‘á»ƒ gá»i hÃ m <code>getTodos()</code> Ä‘Ã£ cho sau khi <code>&lt;TodoList&gt;</code> Ä‘Æ°á»£c render láº§n Ä‘áº§u. LÆ°u Ã½ ráº±ng hÃ m nÃ y tráº£ vá» má»™t Promise, báº¡n cÃ³ thá»ƒ láº¥y giÃ¡ trá»‹ báº±ng cÃ¡ch gá»i <code>.then(value =&gt; { })</code>. Khi Ä‘Ã£ cÃ³ giÃ¡ trá»‹ Promise, hÃ£y lÆ°u nÃ³ vÃ o hook useState <code>todos</code> báº±ng cÃ¡ch gá»i phÆ°Æ¡ng thá»©c <code>setTodos</code> liÃªn quan.</p>\n<p>Cuá»‘i cÃ¹ng, cáº­p nháº­t JSX Ä‘á»ƒ render tá»«ng má»¥c tá»« <code>todos</code> thÃ nh má»™t <code>&lt;li&gt;</code> chá»©a giÃ¡ trá»‹ thuá»™c tÃ­nh <code>.text</code> cá»§a má»¥c todo Ä‘Ã³.</p>\n<solution>\n  <h4>ğŸ‰ ChÃºc má»«ng!</h4>\n  <p>\n    Báº¡n Ä‘Ã£ hoÃ n thÃ nh chÆ°Æ¡ng Ã¡p chÃ³t,\n    vÃ  Ä‘Ã£ há»c cÃ¡ch render danh sÃ¡ch má»™t cÃ¡ch hiá»‡u quáº£.\n  </p>\n</solution>\n\n\n\n\n\n\n"}