<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="icon" href="/favicon.ico">
		<title>Option Hooks â€“ Preact Guide</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
		<meta name="color-scheme" content="dark light">
		<meta name="theme-color" content="#673AB8">
		<link rel="alternate" type="application/rss+xml" href="https://preactjs.com/feed.xml">
		<link rel="alternate" type="application/atom+xml" href="https://preactjs.com/feed.atom">
		<meta property="og:image" content="https://preactjs.com/app-icon.png">
		<meta name="twitter:card" content="summary">
		<link href="https://esm.sh" rel="preconnect" crossorigin="anonymous">
		<link href="https://www.google-analytics.com" rel="preconnect" crossorigin="anonymous">
		<script type="module" crossorigin src="/assets/index-CLtuOrgi.js"></script>
		<link rel="stylesheet" crossorigin href="/assets/index-BQWfkFBE.css">
	<meta name="description" content="Preact has several option hooks that allow you to attach callbacks to various stages of the diffing process.">
<meta property="og:url" content="https://preactjs.com/guide/v10/options">
<meta property="og:title" content="Option Hooks â€“ Preact Guide">
<meta property="og:description" content="Preact has several option hooks that allow you to attach callbacks to various stages of the diffing process."></head>
	<body class="banner">
		<div id="app"><header class="_header_1a7q2_36 "><div class="_banner_1a7q2_1"><a href="https://www.stopputin.net/">We stand with Ukraine. <b>Show your support</b> ðŸ‡ºðŸ‡¦</a></div><div class="_outer_1a7q2_22"><div class="_inner_1a7q2_308"><nav><a href="/" aria-label="Home" class="home "><svg aria-label="Preact Logo" width="34px" height="34px" viewBox="-256 -256 512 512" style="display:inline-block; margin:-.25em 0 0; vertical-align:middle;"><path d="M0,-256 221.7025033688164,-128 221.7025033688164,128 0,256 -221.7025033688164,128 -221.7025033688164,-128z" fill="white"></path><ellipse cx="0" cy="0" rx="75px" ry="196px" stroke-width="16px" stroke-dasharray="387 60" stroke-dashoffset="0" fill="none" stroke="#673ab8" transform="rotate(52)"></ellipse><ellipse cx="0" cy="0" rx="75px" ry="196px" stroke-width="16px" stroke-dasharray="387 60" stroke-dashoffset="0" fill="none" stroke="#673ab8" transform="rotate(-52)"></ellipse><circle cx="0" cy="0" r="34" fill="#673ab8"></circle></svg>Preact</a><a href="/tutorial">Tutorial</a><a href="/guide/v10/getting-started" class="_current_1a7q2_90">Guide</a><div data-route="about" data-open="false" class="_navGroup_1a7q2_76"><button aria-haspopup="true" aria-expanded="false">About</button><nav aria-label="submenu" aria-hidden="true"><a href="/about/we-are-using">Companies using Preact</a><a href="/about/libraries-addons">Libraries &amp; Add-ons</a><a href="/about/demos-examples">Demos &amp; Examples</a><a href="/about/project-goals">Project Goals</a><a href="/about/browser-support">Browser Support</a></nav></div><a href="/blog">Blog</a><a href="/repl">REPL</a></nav><div class="_search_1a7q2_468"><button type="button" aria-label="Search" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" class="DocSearch-Search-Icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="_social_1a7q2_326"><a href="https://github.com/preactjs/preact/releases/tag/10.26.6" class="_socialItem_1a7q2_345 _release_1a7q2_384">v10.26.6</a><a aria-label="Browse the code on GitHub" href="https://github.com/preactjs/preact" target="_blank" rel="noopener noreferrer" class="_socialItem_1a7q2_345"><svg aria-hidden="true" viewBox="0 0 24 24"><use href="/icons.svg#github"></use></svg></a><a aria-label="Follow us on Twitter" href="https://twitter.com/preactjs" target="_blank" rel="noopener noreferrer" class="_socialItem_1a7q2_345"><svg aria-hidden="true" viewBox="0 0 34 27.646"><use href="/icons.svg#twitter"></use></svg></a><a aria-label="Follow us on Bluesky" href="https://bsky.app/profile/preactjs.com" target="_blank" rel="noopener noreferrer" class="_socialItem_1a7q2_345"><svg aria-hidden="true" viewBox="0 0 568 501"><use href="/icons.svg#bluesky"></use></svg></a><a aria-label="Chat with us on Slack" href="http://chat.preactjs.com/" target="_blank" rel="noopener noreferrer" class="_socialItem_1a7q2_345"><svg aria-hidden="true" viewBox="0 0 512 512"><use href="/icons.svg#slack"></use></svg></a></div><div class="_translation_1a7q2_327"><div data-open="false" class="_navGroup_1a7q2_76"><button aria-label="Select your language" aria-haspopup="true" aria-expanded="false"><svg aria-hidden="true" viewBox="0 0 24 24"><use href="/icons.svg#i18n"></use></svg></button><nav aria-label="submenu" aria-hidden="true"></nav></div></div><div class="_hamburger_1a7q2_390"><div class="_hb1_1a7q2_433"></div><div class="_hb2_1a7q2_434"></div><div class="_hb3_1a7q2_435"></div></div></div></div><a href="https://opencollective.com/preact" target="_blank" rel="noopener noreferrer" class="_corner_1vho8_1"><div class="_cornerText_1vho8_31">Help<br>Support Us</div></a></header><main><loading-bar></loading-bar><div class="_page_sqynl_1 _withSidebar_sqynl_119"><div class="_outer_sqynl_111"><div class="_sidebarWrap_sqynl_115"><div data-open="false" class="_wrapper_t9oa6_1"><button value="sidebar" class="_toggle_t9oa6_6">Guide</button><aside class="_sidebar_t9oa6_58"><div class="_sidebarInner_t9oa6_93"><label class="_root_1cgs3_1">Version: <select class="_select_1cgs3_8"><option selected value="v10">10.x (current)</option><option value="v8">8.x</option></select></label><nav class="_toc_1ttwe_1 "><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">Introduction</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/getting-started" class="_link_1ttwe_16  ">Getting Started</a><a href="/guide/v10/whats-new" class="_link_1ttwe_16  ">What's new?</a><a href="/guide/v10/upgrade-guide" class="_link_1ttwe_16  ">Upgrading from 8.x</a><a href="/guide/v10/tutorial" class="_link_1ttwe_16  ">Tutorial</a></div><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">Essentials</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/components" class="_link_1ttwe_16  ">Components</a><a href="/guide/v10/hooks" class="_link_1ttwe_16  ">Hooks</a><a href="/guide/v10/signals" class="_link_1ttwe_16  ">Signals</a><a href="/guide/v10/forms" class="_link_1ttwe_16  ">Forms</a><a href="/guide/v10/refs" class="_link_1ttwe_16  ">References</a><a href="/guide/v10/context" class="_link_1ttwe_16  ">Context</a></div><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">Debug &amp; Test</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/debugging" class="_link_1ttwe_16  ">Debugging Tools</a><a href="/guide/v10/preact-testing-library" class="_link_1ttwe_16  ">Preact Testing Library</a><a href="/guide/v10/unit-testing-with-enzyme" class="_link_1ttwe_16  ">Unit Testing with Enzyme</a></div><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">React compatibility</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/differences-to-react" class="_link_1ttwe_16  ">Differences to React</a><a href="/guide/v10/switching-to-preact" class="_link_1ttwe_16  ">Switching to Preact</a></div><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">Advanced</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/api-reference" class="_link_1ttwe_16  ">API Reference</a><a href="/guide/v10/web-components" class="_link_1ttwe_16  ">Web Components</a><a href="/guide/v10/server-side-rendering" class="_link_1ttwe_16  ">Server-Side Rendering</a><a href="/guide/v10/options" class="_link_1ttwe_16 _linkActive_1ttwe_43 ">Option Hooks</a><a href="/guide/v10/typescript" class="_link_1ttwe_16  ">TypeScript</a><a href="/guide/v10/no-build-workflows" class="_link_1ttwe_16  ">No-Build Workflows</a></div><h3 class="_category_1ttwe_50 _level-2_1ttwe_79">Libraries</h3><div class="_accordionBody_1ttwe_68"><a href="/guide/v10/preact-iso" class="_link_1ttwe_16  ">preact-iso</a></div></nav></div></aside></div></div><div class="_inner_sqynl_59"><div class="_wrapper_1gw8e_1"><a href="https://github.com/preactjs/preact-www/tree/master/content/en/guide/v10/options.md" target="_blank" rel="noopener noreferrer" class="_edit_1gw8e_13">Edit this Page</a></div><content-region name="/guide/v10/options" data-page-nav="false" can-edit><div class="markup"><h1>Option Hooks</h1><p>Callbacks for plugins that can change Preact's rendering.</p>
<p>Preact supports a number of different callbacks that can be used to observe or change each stage of the rendering process, commonly referred to as &quot;Option Hooks&quot; (not to be confused with <a href="/guide/v10/hooks">hooks</a>). These are frequently used to extend the feature-set of Preact itself, or to create specialized testing tools. All of our addons like <code>preact/hooks</code>, <code>preact/compat</code> and our devtools extension are based on these callbacks.</p>
<p>This API is primarily intended for tooling or library authors who wish to extend Preact.</p>
<hr>
<nav><ul><li><a href="#versioning-and-support">Versioning and Support</a></li><li><a href="#setting-option-hooks">Setting Option Hooks</a></li><li><a href="#available-option-hooks">Available Option Hooks</a></li></ul></nav><hr>

				<h2 id="versioning-and-support">
					<a href="#versioning-and-support" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: Versioning and Support (#versioning-and-support)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>Versioning and Support</span>
				</h2><p>Option Hooks are shipped in Preact, and as such are semantically versioned. However, they do not have the same deprecation policy, which means major versions can change the API without an extended announcement period leading up to release. This is also true for the structure of internal APIs exposed through Options Hooks, like <code>VNode</code> objects.</p>

				<h2 id="setting-option-hooks">
					<a href="#setting-option-hooks" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: Setting Option Hooks (#setting-option-hooks)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>Setting Option Hooks</span>
				</h2><p>You can set Options Hooks in Preact by modifying the exported <code>options</code> object.</p>
<p>When defining a hook, always make sure to call a previously defined hook of that name if there was one. Without this, the callchain will be broken and code that depends on the previously-installed hook will break, resulting in addons like <code>preact/hooks</code> or DevTools ceasing to work. Make sure to pass the same arguments to the original hook, too - unless you have a specific reason to change them.</p>

				<div class="highlight-container">
					<pre class="highlight"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> options <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'preact'</span><span class="token punctuation">;</span>

<span class="token comment">// Store previous hook</span>
<span class="token keyword">const</span> oldHook <span class="token operator">=</span> options<span class="token punctuation">.</span>vnode<span class="token punctuation">;</span>

<span class="token comment">// Set our own options hook</span>
options<span class="token punctuation">.</span><span class="token function-variable function">vnode</span> <span class="token operator">=</span> <span class="token parameter">vnode</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hey I'm a vnode&quot;</span><span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Call previously defined hook if there was any</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>oldHook<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">oldHook</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
					
				</div>
			<p>None of the currently available hooks excluding <code>options.event</code> have return values, so handling return values from the original hook is not necessary.</p>

				<h2 id="available-option-hooks">
					<a href="#available-option-hooks" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: Available Option Hooks (#available-option-hooks)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>Available Option Hooks</span>
				</h2>
				<h4 id="optionsvnode">
					<a href="#optionsvnode" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.vnode` (#optionsvnode)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.vnode`</span>
				</h4><p><strong>Signature:</strong> <code>(vnode: VNode) => void</code></p>
<p>The most common Options Hook, <code>vnode</code> is invoked whenever a VNode object is created. VNodes are Preact's representation of Virtual DOM elements, commonly thought of as &quot;JSX Elements&quot;.</p>

				<h4 id="optionsunmount">
					<a href="#optionsunmount" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.unmount` (#optionsunmount)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.unmount`</span>
				</h4><p><strong>Signature:</strong> <code>(vnode: VNode) => void</code></p>
<p>Invoked immediately before a vnode is unmounted, when its DOM representation is still attached.</p>

				<h4 id="optionsdiffed">
					<a href="#optionsdiffed" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.diffed` (#optionsdiffed)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.diffed`</span>
				</h4><p><strong>Signature:</strong> <code>(vnode: VNode) => void</code></p>
<p>Invoked immediately after a vnode is rendered, once its DOM representation is constructed or transformed into the correct state.</p>

				<h4 id="optionsevent">
					<a href="#optionsevent" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.event` (#optionsevent)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.event`</span>
				</h4><p><strong>Signature:</strong> <code>(event: Event) => any</code></p>
<p>Invoked just before a DOM event is handled by its associated Virtual DOM listener. When <code>options.event</code> is set, the event which is event listener argument is replaced return value of <code>options.event</code>.</p>

				<h4 id="optionsrequestanimationframe">
					<a href="#optionsrequestanimationframe" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.requestAnimationFrame` (#optionsrequestanimationframe)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.requestAnimationFrame`</span>
				</h4><p><strong>Signature:</strong> <code>(callback: () => void) => void</code></p>
<p>Controls the scheduling of effects and effect-based based functionality in <code>preact/hooks</code>.</p>

				<h4 id="optionsdebouncerendering">
					<a href="#optionsdebouncerendering" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.debounceRendering` (#optionsdebouncerendering)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.debounceRendering`</span>
				</h4><p><strong>Signature:</strong> <code>(callback: () => void) => void</code></p>
<p>A timing &quot;deferral&quot; function that is used to batch processing of updates in the global component rendering queue.</p>
<p>By default, Preact uses a zero duration <code>setTimeout</code>.</p>

				<h4 id="optionsusedebugvalue">
					<a href="#optionsusedebugvalue" class="fragment-link">
						<svg width="16" height="16" viewBox="0 0 24 24" aria-label="Link to: `options.useDebugValue` (#optionsusedebugvalue)">
							<use href="/icons.svg#link"></use>
						</svg>
					</a>
					<span>`options.useDebugValue`</span>
				</h4><p><strong>Signature:</strong> <code>(value: string | number) => void</code></p>
<p>Called when the <code>useDebugValue</code> hook in <code>preact/hooks</code> is called.</p>
</div></content-region><footer class="_footer_8z8ez_1"><div><p><label>Language: <select><option selected value="en">English</option><option value="vi">Tiáº¿ng Viá»‡t</option></select><code>?lang=en</code></label></p><p style="line-height: 1">Built by a bunch of <a href="https://github.com/preactjs/preact/graphs/contributors" target="_blank" rel="noopener noreferrer">lovely people</a>  like <a href="https://github.com/stevenle" target="_blank" rel="noopener noreferrer">@stevenle</a>.</p></div></footer></div></div></div></main><script type="isodata"></script><script async defer src="https://www.google-analytics.com/analytics.js"></script><script type="application/json" id="prerender-data">{"preactVersion":"10.26.6","preactReleaseURL":"https://github.com/preactjs/preact/releases/tag/10.26.6","preactStargazers":37495}</script></div>
	</body>
</html>
